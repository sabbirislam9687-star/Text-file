<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>text in file</title>
    <meta name="theme-color" content="#2563eb">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .app-header {
            background: #2563eb;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .app-title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 60px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            min-width: 280px;
        }
        
        .dropdown-menu.active {
            display: block;
        }
        
        .menu-item {
            padding: 12px 20px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .menu-item:hover {
            background: #f8fafc;
        }
        
        .submenu {
            display: none;
            background: #f8fafc;
        }
        
        .submenu.active {
            display: block;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: #f8fafc;
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 12px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 14px;
            font-weight: bold;
            color: #2563eb;
        }
        
        .toolbar {
            padding: 10px 15px;
            background: #f1f5f9;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            border-bottom: 1px solid #e2e8f0;
        }
        
        button {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .color-palette {
            display: none;
            position: absolute;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        
        .color-palette.active {
            display: grid;
        }
        
        .color-option {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }
        
        .color-option:hover {
            transform: scale(1.1);
            border-color: #000;
        }
        
        .font-selector {
            display: none;
            position: absolute;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            flex-direction: column;
            gap: 8px;
            min-width: 200px;
        }
        
        .font-selector.active {
            display: flex;
        }
        
        .font-option {
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s;
        }
        
        .font-option:hover {
            background: #2563eb;
            color: white;
            transform: translateX(5px);
        }
        
        .editor-container {
            padding: 15px;
            position: relative;
        }
        
        #editor {
            width: 100%;
            height: 500px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-size: 16px;
            line-height: 1.6;
            outline: none;
            overflow-y: auto;
            background: white;
        }
        
        #editor:focus {
            border-color: #2563eb;
        }
        
        .handwriting-canvas {
            display: none;
            width: 100%;
            height: 500px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: crosshair;
            touch-action: none;
        }
        
        .handwriting-tools {
            display: none;
            padding: 15px;
            background: #f1f5f9;
            border-radius: 8px;
            margin-top: 10px;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .handwriting-tools.active {
            display: flex;
        }
        
        .brush-size {
            display: flex;
            gap: 5px;
            align-items: center;
        }
        
        .size-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #000;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .size-option.active {
            border-color: #2563eb;
        }
        
        .status-bar {
            padding: 10px 15px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }
        
        .file-info {
            color: #64748b;
        }
        
        .unsaved {
            color: #ef4444;
            font-weight: bold;
        }
        
        .image-preview {
            max-width: 300px;
            max-height: 200px;
            margin: 10px 0;
            border-radius: 8px;
            display: none;
            border: 2px solid #e2e8f0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 12px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .modal.active {
            display: flex;
        }

        /* Text formatting styles */
        .bold { font-weight: bold; }
        .italic { font-style: italic; }
        .underline { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="app-title">‚úèÔ∏è Advanced Text Editor</div>
            <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
            
            <div class="dropdown-menu" id="dropdown-menu">
                <!-- File Menu -->
                <div class="menu-item" onclick="toggleSubmenu('file-menu')">
                    üìÅ File Options - ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∂‡¶®
                </div>
                <div class="submenu" id="file-menu">
                    <div class="menu-item" onclick="newFile()">
                        üÜï New File - ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶æ‡¶á‡¶≤
                    </div>
                    <div class="menu-item" onclick="openFile()">
                        üìÇ Open File - ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®
                    </div>
                    <div class="menu-item" onclick="saveFile()">
                        üíæ Save File - ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </div>
                    <div class="menu-item" onclick="exportFile()">
                        üì§ Export - ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </div>
                </div>
                
                <!-- Advanced Menu -->
                <div class="menu-item" onclick="toggleSubmenu('advanced-menu')">
                    ‚ö° Advanced Text - ‡¶è‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü
                </div>
                <div class="submenu" id="advanced-menu">
                    <div class="menu-item" onclick="showFontSelector()">
                        üî§ Change Font - ‡¶´‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
                    </div>
                    <div class="menu-item" onclick="showColorPalette()">
                        üé® Text Color - ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶∞‡¶Ç
                    </div>
                    <div class="menu-item" onclick="formatText('bold')">
                        <b>B</b> Bold Text - ‡¶¨‡ßã‡¶≤‡ßç‡¶° ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü
                    </div>
                    <div class="menu-item" onclick="formatText('italic')">
                        <i>I</i> Italic Text - ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü
                    </div>
                    <div class="menu-item" onclick="formatText('underline')">
                        <u>U</u> Underline - ‡¶Ü‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶≤‡¶æ‡¶á‡¶®
                    </div>
                    <div class="menu-item" onclick="insertBulletPoints()">
                        ‚Ä¢ Bullet Points - ‡¶¨‡ßÅ‡¶≤‡ßá‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü
                    </div>
                    <div class="menu-item" onclick="clearFormatting()">
                        üßπ Clear Format - ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶∏‡¶∞‡¶æ‡¶®
                    </div>
                </div>
                
                <!-- Tools Menu -->
                <div class="menu-item" onclick="toggleSubmenu('tools-menu')">
                    üõ†Ô∏è Tools - ‡¶ü‡ßÅ‡¶≤‡¶∏
                </div>
                <div class="submenu" id="tools-menu">
                    <div class="menu-item" onclick="toggleHandwriting()">
                        ‚úçÔ∏è Handwriting - ‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ
                    </div>
                    <div class="menu-item" onclick="addImage()">
                        üñºÔ∏è Add Image - ‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </div>
                    <div class="menu-item" onclick="showWordCount()">
                        üìä Word Count - ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶ó‡¶£‡¶®‡¶æ
                    </div>
                    <div class="menu-item" onclick="printDocument()">
                        üñ®Ô∏è Print - ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </div>
                </div>
                
                <!-- Share & About -->
                <div class="menu-item" onclick="toggleSubmenu('share-menu')">
                    üîó Share & About - ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá
                </div>
                <div class="submenu" id="share-menu">
                    <div class="menu-item" onclick="shareContent()">
                        üì§ Share Text - ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </div>
                    <div class="menu-item" onclick="showAbout()">
                        ‚ÑπÔ∏è About - ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá
                    </div>
                    <div class="menu-item" onclick="showHelp()">
                        ‚ùì Help - ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="char-count">0</div>
                <div>Characters - ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="word-count">0</div>
                <div>Words - ‡¶∂‡¶¨‡ßç‡¶¶</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="line-count">0</div>
                <div>Lines - ‡¶≤‡¶æ‡¶á‡¶®</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="page-count">1</div>
                <div>Page - ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ</div>
            </div>
        </div>
        
        <div class="toolbar">
            <button class="btn-primary" onclick="newFile()">
                üÜï New - ‡¶®‡¶§‡ßÅ‡¶®
            </button>
            <button class="btn-primary" onclick="openFile()">
                üìÇ Open - ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®
            </button>
            <button class="btn-success" onclick="saveFile()" id="save-btn">
                üíæ Save - ‡¶∏‡ßá‡¶≠
            </button>
            <button class="btn-warning" onclick="showWordCount()">
                üìä Count - ‡¶ó‡¶£‡¶®‡¶æ
            </button>
            <button class="btn-primary" onclick="shareContent()">
                üì§ Share - ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞
            </button>
            <button class="btn-primary" onclick="printDocument()">
                üñ®Ô∏è Print - ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü
            </button>
        </div>
        
        <div class="editor-container">
            <!-- Content Editable Editor -->
            <div 
                id="editor" 
                contenteditable="true"
                placeholder="Start typing here... Use the menu for advanced features.
‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®... ‡¶è‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏ ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"
                oninput="updateStats()"
                onkeyup="updateStats()"
                onclick="updateStats()"
            ></div>
            
            <!-- Handwriting Canvas -->
            <canvas 
                id="handwriting-canvas" 
                class="handwriting-canvas"
            ></canvas>
            
            <!-- Handwriting Tools -->
            <div class="handwriting-tools" id="handwriting-tools">
                <strong>Brush Color - ‡¶¨‡ßç‡¶∞‡¶æ‡¶∂ ‡¶∞‡¶Ç:</strong>
                <div class="color-option" style="background: #000000;" onclick="changeBrushColor('#000000')" title="Black - ‡¶ï‡¶æ‡¶≤‡ßã"></div>
                <div class="color-option" style="background: #2563eb;" onclick="changeBrushColor('#2563eb')" title="Blue - ‡¶®‡ßÄ‡¶≤"></div>
                <div class="color-option" style="background: #ef4444;" onclick="changeBrushColor('#ef4444')" title="Red - ‡¶≤‡¶æ‡¶≤"></div>
                <div class="color-option" style="background: #10b981;" onclick="changeBrushColor('#10b981')" title="Green - ‡¶∏‡¶¨‡ßÅ‡¶ú"></div>
                <div class="color-option" style="background: #f59e0b;" onclick="changeBrushColor('#f59e0b')" title="Orange - ‡¶ï‡¶Æ‡¶≤‡¶æ"></div>
                
                <strong>Brush Size - ‡¶¨‡ßç‡¶∞‡¶æ‡¶∂ ‡¶∏‡¶æ‡¶á‡¶ú:</strong>
                <div class="brush-size">
                    <div class="size-option" style="width: 4px; height: 4px;" onclick="changeBrushSize(2)" title="Thin - ‡¶™‡¶æ‡¶§‡¶≤‡¶æ"></div>
                    <div class="size-option" style="width: 8px; height: 8px;" onclick="changeBrushSize(5)" title="Medium - ‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø"></div>
                    <div class="size-option" style="width: 16px; height: 16px;" onclick="changeBrushSize(10)" title="Thick - ‡¶Æ‡ßã‡¶ü‡¶æ"></div>
                </div>
                
                <button onclick="clearCanvas()" style="background: #ef4444; color: white;">Clear - ‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞</button>
                <button onclick="saveDrawing()" style="background: #10b981; color: white;">Save Drawing - ‡¶°‡ßç‡¶∞‡¶Ø‡¶º‡¶ø‡¶Ç ‡¶∏‡ßá‡¶≠</button>
                <button onclick="toggleHandwriting()" style="background: #64748b; color: white;">Back to Text - ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá ‡¶´‡¶ø‡¶∞‡ßÅ‡¶®</button>
            </div>
            
            <!-- Image Preview -->
            <img id="image-preview" class="image-preview">
        </div>
        
        <!-- Color Palette -->
        <div class="color-palette" id="color-palette">
            <div class="color-option" style="background: #000000;" onclick="changeTextColor('#000000')" title="Black - ‡¶ï‡¶æ‡¶≤‡ßã"></div>
            <div class="color-option" style="background: #2563eb;" onclick="changeTextColor('#2563eb')" title="Blue - ‡¶®‡ßÄ‡¶≤"></div>
            <div class="color-option" style="background: #ef4444;" onclick="changeTextColor('#ef4444')" title="Red - ‡¶≤‡¶æ‡¶≤"></div>
            <div class="color-option" style="background: #10b981;" onclick="changeTextColor('#10b981')" title="Green - ‡¶∏‡¶¨‡ßÅ‡¶ú"></div>
            <div class="color-option" style="background: #f59e0b;" onclick="changeTextColor('#f59e0b')" title="Orange - ‡¶ï‡¶Æ‡¶≤‡¶æ"></div>
            <div class="color-option" style="background: #8b5cf6;" onclick="changeTextColor('#8b5cf6')" title="Purple - ‡¶¨‡ßá‡¶ó‡ßÅ‡¶®‡¶ø"></div>
            <div class="color-option" style="background: #ec4899;" onclick="changeTextColor('#ec4899')" title="Pink - ‡¶ó‡ßã‡¶≤‡¶æ‡¶™‡¶ø"></div>
            <div class="color-option" style="background: #64748b;" onclick="changeTextColor('#64748b')" title="Gray - ‡¶ß‡ßÇ‡¶∏‡¶∞"></div>
        </div>
        
        <!-- Font Selector -->
        <div class="font-selector" id="font-selector">
            <div class="font-option" style="font-family: Arial, sans-serif;" onclick="changeFont('Arial, sans-serif')">Arial</div>
            <div class="font-option" style="font-family: 'Times New Roman', serif;" onclick="changeFont('Times New Roman, serif')">Times New Roman</div>
            <div class="font-option" style="font-family: 'Courier New', monospace;" onclick="changeFont('Courier New, monospace')">Courier New</div>
            <div class="font-option" style="font-family: Georgia, serif;" onclick="changeFont('Georgia, serif')">Georgia</div>
            <div class="font-option" style="font-family: Verdana, sans-serif;" onclick="changeFont('Verdana, sans-serif')">Verdana</div>
            <div class="font-option" style="font-family: 'Comic Sans MS', cursive;" onclick="changeFont('Comic Sans MS, cursive')">Comic Sans</div>
            <div class="font-option" style="font-family: 'Trebuchet MS', sans-serif;" onclick="changeFont('Trebuchet MS, sans-serif')">Trebuchet MS</div>
            <div class="font-option" style="font-family: 'Garamond', serif;" onclick="changeFont('Garamond, serif')">Garamond</div>
        </div>
        
        <!-- Modals -->
        <div class="modal" id="word-count-modal">
            <div class="modal-content">
                <h3>üìä Text Statistics - ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®</h3>
                <div style="margin: 20px 0; line-height: 2;">
                    <p><strong>Characters - ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞:</strong> <span id="modal-char-count">0</span></p>
                    <p><strong>Words - ‡¶∂‡¶¨‡ßç‡¶¶:</strong> <span id="modal-word-count">0</span></p>
                    <p><strong>Lines - ‡¶≤‡¶æ‡¶á‡¶®:</strong> <span id="modal-line-count">0</span></p>
                    <p><strong>Pages - ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ:</strong> <span id="modal-page-count">1</span></p>
                    <p><strong>Reading Time - ‡¶™‡¶°‡¶º‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º:</strong> <span id="reading-time">0</span> minutes - ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</p>
                </div>
                <button onclick="closeModal('word-count-modal')" style="width: 100%; padding: 12px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Close - ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
        </div>
        
        <div class="modal" id="about-modal">
            <div class="modal-content">
                <h3>‚ÑπÔ∏è About Advanced Text Editor</h3>
                <div style="margin: 20px 0; line-height: 1.6;">
                    <p><strong>Advanced Text Editor - ‡¶è‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶è‡¶°‡¶ø‡¶ü‡¶∞</strong></p>
                    <p><strong>Version - ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£:</strong> 3.0</p>
                    <p><strong>Created by - ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®:</strong> Sabbir Islam</p>
                    <p><strong>Features - ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Rich Text Editing with Formatting - ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶π ‡¶∞‡¶ø‡¶ö ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶è‡¶°‡¶ø‡¶ü‡¶ø‡¶Ç</li>
                        <li>File System Access - ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏</li>
                        <li>Handwriting Mode - ‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶Æ‡ßã‡¶°</li>
                        <li>Image Support - ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                        <li>Real-time Statistics - ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®</li>
                        <li>Multiple Fonts & Colors - ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶´‡¶®‡ßç‡¶ü ‡¶ì ‡¶∞‡¶Ç</li>
                        <li>Export & Share - ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ì ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞</li>
                    </ul>
                </div>
                <button onclick="closeModal('about-modal')" style="width: 100%; padding: 12px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Close - ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
        </div>

        <div class="modal" id="help-modal">
            <div class="modal-content">
                <h3>‚ùì Help - ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø</h3>
                <div style="margin: 20px 0; line-height: 1.6;">
                    <p><strong>How to Use - ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Text Formatting - ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶Ç:</strong> Select text and use Advanced menu - ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá Advanced ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                        <li><strong>Font Change - ‡¶´‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®:</strong> Advanced ‚Üí Change Font - ‡¶è‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏ ‚Üí ‡¶´‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</li>
                        <li><strong>Handwriting - ‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ:</strong> Tools ‚Üí Handwriting - ‡¶ü‡ßÅ‡¶≤‡¶∏ ‚Üí ‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ</li>
                        <li><strong>Add Images - ‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßã‡¶ó:</strong> Tools ‚Üí Add Image - ‡¶ü‡ßÅ‡¶≤‡¶∏ ‚Üí ‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                        <li><strong>Save Files - ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶≠:</strong> File ‚Üí Save File - ‡¶´‡¶æ‡¶á‡¶≤ ‚Üí ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    </ul>
                </div>
                <button onclick="closeModal('help-modal')" style="width: 100%; padding: 12px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Close - ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
        </div>
        
        <div class="status-bar">
            <div class="file-info">
                File - ‡¶´‡¶æ‡¶á‡¶≤: <span id="current-file">Untitled.txt - ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶æ‡¶á‡¶≤</span>
            </div>
            <div class="unsaved" id="unsaved-indicator" style="display: none;">
                * Unsaved Changes - * ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø
            </div>
        </div>
    </div>

    <script>
        let currentFileHandle = null;
        let hasUnsavedChanges = false;
        let isDrawing = false;
        let canvas, ctx;
        let currentBrushColor = '#000000';
        let currentBrushSize = 5;
        
        // DOM Elements
        const editor = document.getElementById('editor');
        const currentFile = document.getElementById('current-file');
        const unsavedIndicator = document.getElementById('unsaved-indicator');
        const saveBtn = document.getElementById('save-btn');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const colorPalette = document.getElementById('color-palette');
        const fontSelector = document.getElementById('font-selector');
        const handwritingCanvas = document.getElementById('handwriting-canvas');
        const handwritingTools = document.getElementById('handwriting-tools');
        const imagePreview = document.getElementById('image-preview');
        
        // Initialize
        function init() {
            canvas = handwritingCanvas;
            ctx = canvas.getContext('2d');
            setupCanvas();
            updateStats();
            
            // Set placeholder for contenteditable
            editor.addEventListener('focus', function() {
                if (this.innerHTML === '' || this.innerHTML === '<br>') {
                    this.innerHTML = '';
                }
            });
            
            editor.addEventListener('blur', function() {
                if (this.innerHTML === '' || this.innerHTML === '<br>') {
                    this.innerHTML = '';
                }
            });
        }
        
        // Menu Functions
        function toggleMenu() {
            dropdownMenu.classList.toggle('active');
            closeSubMenus();
            closePopups();
        }
        
        function toggleSubmenu(menuId) {
            const menu = document.getElementById(menuId);
            menu.classList.toggle('active');
            closePopups();
        }
        
        function closeSubMenus() {
            const submenus = document.querySelectorAll('.submenu');
            submenus.forEach(menu => menu.classList.remove('active'));
        }
        
        function closePopups() {
            colorPalette.classList.remove('active');
            fontSelector.classList.remove('active');
        }
        
        // File Operations
        async function newFile() {
            if (hasUnsavedChanges && !confirm('You have unsaved changes. Are you sure?\n‡¶∏‡ßá‡¶≠ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶Ü‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?')) {
                return;
            }
            editor.innerHTML = '';
            currentFileHandle = null;
            currentFile.textContent = 'Untitled.txt - ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶æ‡¶á‡¶≤';
            hasUnsavedChanges = false;
            updateUI();
            updateStats();
            closeAllMenus();
        }
        
        async function openFile() {
            try {
                if (!('showOpenFilePicker' in window)) {
                    alert('File System Access API not supported in your browser\n‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ API ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ');
                    return;
                }
                
                const [fileHandle] = await window.showOpenFilePicker({
                    types: [{
                        description: 'Text Files',
                        accept: {'text/plain': ['.txt']},
                    }],
                });
                
                const file = await fileHandle.getFile();
                const content = await file.text();
                
                editor.innerHTML = content.replace(/\n/g, '<br>');
                currentFileHandle = fileHandle;
                currentFile.textContent = file.name;
                hasUnsavedChanges = false;
                updateUI();
                updateStats();
                closeAllMenus();
                
            } catch (error) {
                console.log('File selection cancelled');
            }
        }
        
        async function saveFile() {
            try {
                if (!currentFileHandle) {
                    currentFileHandle = await window.showSaveFilePicker({
                        types: [{
                            description: 'Text Files',
                            accept: {'text/plain': ['.txt']},
                        }],
                    });
                }
                
                const writable = await currentFileHandle.createWritable();
                const content = editor.innerText || editor.textContent;
                await writable.write(content);
                await writable.close();
                
                currentFile.textContent = currentFileHandle.name;
                hasUnsavedChanges = false;
                updateUI();
                closeAllMenus();
                
                alert('File saved successfully!\n‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                
            } catch (error) {
                console.log('File save cancelled');
            }
        }
        
        function exportFile() {
            const content = editor.innerText || editor.textContent;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = currentFile.textContent.split(' - ')[0] || 'document.txt';
            a.click();
            URL.revokeObjectURL(url);
            closeAllMenus();
        }
        
        // Advanced Text Features - NOW WORKING!
        function showColorPalette() {
            colorPalette.classList.toggle('active');
            fontSelector.classList.remove('active');
        }
        
        function showFontSelector() {
            fontSelector.classList.toggle('active');
            colorPalette.classList.remove('active');
        }
        
        function changeTextColor(color) {
            document.execCommand('foreColor', false, color);
            hasUnsavedChanges = true;
            updateUI();
            editor.focus();
        }
        
        function changeFont(font) {
            document.execCommand('fontName', false, font);
            hasUnsavedChanges = true;
            updateUI();
            editor.focus();
        }
        
        function formatText(command) {
            document.execCommand(command, false, null);
            hasUnsavedChanges = true;
            updateUI();
            editor.focus();
        }
        
        function insertBulletPoints() {
            document.execCommand('insertUnorderedList', false, null);
            hasUnsavedChanges = true;
            updateUI();
            editor.focus();
        }
        
        function clearFormatting() {
            document.execCommand('removeFormat', false, null);
            document.execCommand('formatBlock', false, 'div');
            hasUnsavedChanges = true;
            updateUI();
            editor.focus();
        }
        
        // Statistics Functions
        function updateStats() {
            const content = editor.innerText || editor.textContent;
            const charCount = content.length;
            const wordCount = content.trim() ? content.trim().split(/\s+/).length : 0;
            const lineCount = content ? content.split('\n').length : 1;
            const pageCount = Math.ceil(charCount / 2000);
            const readingTime = Math.ceil(wordCount / 200);
            
            document.getElementById('char-count').textContent = charCount.toLocaleString();
            document.getElementById('word-count').textContent = wordCount.toLocaleString();
            document.getElementById('line-count').textContent = lineCount.toLocaleString();
            document.getElementById('page-count').textContent = pageCount;
            
            hasUnsavedChanges = true;
            updateUI();
        }
        
        function showWordCount() {
            const content = editor.innerText || editor.textContent;
            const charCount = content.length;
            const wordCount = content.trim() ? content.trim().split(/\s+/).length : 0;
            const lineCount = content ? content.split('\n').length : 1;
            const pageCount = Math.ceil(charCount / 2000);
            const readingTime = Math.ceil(wordCount / 200);
            
            document.getElementById('modal-char-count').textContent = charCount.toLocaleString();
            document.getElementById('modal-word-count').textContent = wordCount.toLocaleString();
            document.getElementById('modal-line-count').textContent = lineCount.toLocaleString();
            document.getElementById('modal-page-count').textContent = pageCount;
            document.getElementById('reading-time').textContent = readingTime;
            
            document.getElementById('word-count-modal').classList.add('active');
            closeAllMenus();
        }
        
        // Share Function
        function shareContent() {
            const content = editor.innerText || editor.textContent;
            if (navigator.share) {
                navigator.share({
                    title: 'Text from Advanced Editor',
                    text: content,
                })
                .then(() => console.log('Shared successfully'))
                .catch((error) => console.log('Share failed:', error));
            } else {
                navigator.clipboard.writeText(content)
                    .then(() => alert('Text copied to clipboard!\n‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡¶™‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!'))
                    .catch(() => alert('Could not copy text\n‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø'));
            }
            closeAllMenus();
        }
        
        // About & Help Functions
        function showAbout() {
            document.getElementById('about-modal').classList.add('active');
            closeAllMenus();
        }
        
        function showHelp() {
            document.getElementById('help-modal').classList.add('active');
            closeAllMenus();
        }
        
        function printDocument() {
            const content = editor.innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Print Document</title>
                        <style>
                            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
                            @media print { body { margin: 0; } }
                        </style>
                    </head>
                    <body>${content}</body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }
        
        // Handwriting Functions - NOW WORKING!
        function toggleHandwriting() {
            const isActive = handwritingCanvas.style.display === 'block';
            handwritingCanvas.style.display = isActive ? 'none' : 'block';
            handwritingTools.classList.toggle('active', !isActive);
            editor.style.display = isActive ? 'block' : 'none';
            
            if (!isActive) {
                setTimeout(() => setupCanvas(), 100);
            }
            
            closeAllMenus();
        }
        
        function setupCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            ctx.strokeStyle = currentBrushColor;
            ctx.lineWidth = currentBrushSize;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            // Clear canvas
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add event listeners
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouchStart);
            canvas.addEventListener('touchmove', handleTouchMove);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        function startDrawing(e) {
            isDrawing = true;
            draw(e);
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(e.offsetX, e.offsetY);
        }
        
        function handleTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }
        
        function handleTouchMove(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }
        
        function stopDrawing() {
            isDrawing = false;
            ctx.beginPath();
        }
        
        function changeBrushColor(color) {
            currentBrushColor = color;
            ctx.strokeStyle = color;
        }
        
        function changeBrushSize(size) {
            currentBrushSize = size;
            ctx.lineWidth = size;
        }
        
        function clearCanvas() {
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        function saveDrawing() {
            const dataURL = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'my-drawing.png';
            link.href = dataURL;
            link.click();
        }
        
        // Image Functions - NOW WORKING!
        function addImage() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        // Insert image into editor
                        const img = document.createElement('img');
                        img.src = event.target.result;
                        img.style.maxWidth = '100%';
                        img.style.height = 'auto';
                        img.style.borderRadius = '8px';
                        img.style.margin = '10px 0';
                        
                        // Insert at cursor position
                        const selection = window.getSelection();
                        if (selection.rangeCount > 0) {
                            const range = selection.getRangeAt(0);
                            range.insertNode(img);
                            range.collapse(false);
                        } else {
                            editor.appendChild(img);
                        }
                        
                        hasUnsavedChanges = true;
                        updateUI();
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
            closeAllMenus();
        }
        
        // Utility Functions
        function updateUI() {
            saveBtn.disabled = !hasUnsavedChanges;
            unsavedIndicator.style.display = hasUnsavedChanges ? 'block' : 'none';
        }
        
        function closeAllMenus() {
            dropdownMenu.classList.remove('active');
            closeSubMenus();
            closePopups();
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // Close menus when clicking outside
        document.addEventListener('click', function(e) {
            if (!dropdownMenu.contains(e.target) && !e.target.classList.contains('menu-btn')) {
                closeAllMenus();
            }
        });
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
